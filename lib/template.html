<html>
	<head>
		<style id="museum_style"></style>
		<script id="show_me_script">
			function show_me(url, div) {
				const requested = new Date().getTime();
				let expected = undefined;
				let intervalId = div.getAttribute("show_me_interval_id");

				const render = () => {
					const now = new Date().getTime();
					const sine = (Math.sin(now / 600) + 1) / 2;
					const progress = (expected === undefined) ? 0 : (now - requested) / (expected - requested);
					const remaining = 1 - progress;
					const left = remaining * sine;
					const right = left + progress;

					div.style.background = [
						"linear-gradient(",
						"to right,",
						"rgba(128,128,128,0.5) 0%,",
						`rgba(128,128,128,0.5) ${left * 100}%,`,
						`rgba(128,128,128,0) ${left * 100}%,`,
						`rgba(128,128,128,0) ${right * 100}%,`,
						`rgba(128,128,128,0.5) ${right * 100}%,`,
						"rgba(128,128,128,0.5) 100%",
						")",
					].join(" ");

					if (progress > 1) {
						div.style.background = "";
						div.setAttribute("show_me_interval_id", null);
						window.clearInterval(intervalId);
					}
				};

				if (intervalId) {
					window.clearInterval(parseInt(intervalId));
				}
				intervalId = window.setInterval(render, 40);
				div.setAttribute("show_me_interval_id", intervalId.toString());

				const update = () => {
					if (xhr.readyState === xhr.DONE && xhr.status === 200) {
						expected = parseInt(xhr.responseText);
					}
				};

				const xhr = new XMLHttpRequest();
				xhr.onreadystatechange = update;
				xhr.open('GET', url);
				xhr.send();

				return false;
			}
		</script>
	</head>
	<body>
		<div id="page_content"></div>
	</body>
</html>
